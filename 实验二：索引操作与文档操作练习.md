# 《实验二：索引操作与文档操作练习》



##### 学院：省级示范性软件学院



##### 题目：《实验二：索引操作与文档操作练习》



##### 姓名：王承宸



##### 学号：2100a60134



##### 班级：软工2202



##### 日期：2024-09-14



##### 实验环境：ElasticSearch8.12.2、Kibana8.12.2



<h1>一、实验目的</h1>

<h2>1、掌握Elasticsearch 安装IK分词器安装方法</h2>

##### 以下是分词器安装的文件目录截图

![image-20240916182906224](./imgs/image-20240916182906224.png)

<h2>2、掌握Elasticsearch 索引操作方法</h2>

<h2>3、掌握Elasticsearch 文档操作训练</h2>

<h2>4、掌握Elasticsearch 高级查询与DSL训练</h2>

<h1>二、实验内容</h1>

 <h2>1、索引操作练习</h2>

<h3>1.1创建索引</h3>

##### 创建索引指令如下：

![image-20240914172441772](./imgs/image-20240914172441772.png)![image-20240914172505878](./imgs/image-20240914172505878.png)



![image-20240914172516536](./imgs/image-20240914172516536.png)

##### 创建索引执行结果如下：

<img src=".\imgs\image-20240914172609880.png" alt="image-20240914172609880" style="zoom:200%;" />





<h3>1.2修改索引(自己设计，修改要合理</h3>

##### 向user_information中增加一个number_of_use（使用次数）索引，命令如下：

![image-20240914173520328](./imgs/image-20240914173520328.png)

运行结果如下：

![image-20240914173532849](./imgs/image-20240914173532849.png)

<h3>1.3删除索引</h3>

##### 删除索引的指令如下：

![image-20240914171953365](./imgs/image-20240914171953365.png)

##### 删除索引操作运行结果如下：

![image-20240914172000168](./imgs/image-20240914172000168.png)



<h3>1.4查看所有</h3>

##### 命令如下：

![image-20240914174214628](./imgs/image-20240914174214628.png)

##### 执行结果如下：

![image-20240914174248997](./imgs/image-20240914174248997.png)



## 文档操作练习

### 1.创建文档



##### 向user_infomation中创建一号文档，命令如下：

![image-20240914180115450](./imgs/image-20240914180115450.png)

##### 运行结果如下：

![image-20240914180212947](./imgs/image-20240914180212947.png)

### 2.修改文档

##### 以下是POST更新文档的部分内容的命令：

![image-20240914181357512](./imgs/image-20240914181357512.png)

##### 执行结果如下：

![image-20240914181416585](./imgs/image-20240914181416585.png)

##### 以下是使用PUT更新文档的全部内容的命令：

![image-20240914181516581](./imgs/image-20240914181516581.png)

##### 执行结果如下：

![image-20240914181535468](./imgs/image-20240914181535468.png)



### 3.删除文档

##### 使用DELETE请求来删除1号ID文档，命令如下：

![image-20240914181817702](./imgs/image-20240914181817702.png)

##### 执行结果如下：

![image-20240914181739792](./imgs/image-20240914181739792.png)



### 4.查看文档

##### 在查看文档之前，由于我们刚刚删除了1号文档，所以先进行1号文档的建立，这里省略该步骤

##### 以下是查看1号文档的命令：

![image-20240914182008917](./imgs/image-20240914182008917.png)

##### 执行结果如下：

![image-20240914182024469](./imgs/image-20240914182024469.png)



### 5.将Json数据批量导入ES数据库中

##### 向user_information中传递数据，命令如下：

![image-20240915105435759](./imgs/image-20240915105435759.png)

![image-20240915105718586](./imgs/image-20240915105718586.png)

##### 执行结果如下：

![image-20240915105823715](./imgs/image-20240915105823715.png)

![image-20240915105843260](./imgs/image-20240915105843260.png)![image-20240915105854982](./imgs/image-20240915105854982.png)

![image-20240915110002707](./imgs/image-20240915110002707.png)

![image-20240915110156436](./imgs/image-20240915110156436.png)

![image-20240915110208391](./imgs/image-20240915110208391.png)

![image-20240915110230333](./imgs/image-20240915110230333.png)![image-20240915110237012](./imgs/image-20240915110237012.png)

##### 向product_catalog中传递数据，命令如下：

![image-20240915111214037](./imgs/image-20240915111214037.png)

![image-20240915111238862](./imgs/image-20240915111238862.png)

##### 执行结果如下：

![image-20240916171306217](./imgs/image-20240916171306217.png)![image-20240916171315238](./imgs/image-20240916171315238.png)![image-20240916171322890](./imgs/image-20240916171322890.png)![image-20240916171333346](./imgs/image-20240916171333346.png)![image-20240916171339883](./imgs/image-20240916171339883.png)![image-20240916171347035](./imgs/image-20240916171347035.png)![image-20240916171353949](./imgs/image-20240916171353949.png)![image-20240916171402290](./imgs/image-20240916171402290.png)

##### 向order_records中输入json数据，命令如下：

![image-20240916170330839](./imgs/image-20240916170330839.png)![image-20240916170347118](./imgs/image-20240916170347118.png)

##### 执行结果如下：

![image-20240916150825739](./imgs/image-20240916150825739.png)

![image-20240916150845294](./imgs/image-20240916150845294.png)![image-20240916150902155](./imgs/image-20240916150902155.png)![image-20240916150910972](./imgs/image-20240916150910972.png)![image-20240916150920346](./imgs/image-20240916150920346.png)![image-20240916150930319](./imgs/image-20240916150930319.png)![image-20240916150943743](./imgs/image-20240916150943743.png)![image-20240916151010563](./imgs/image-20240916151010563.png)![image-20240916151022779](./imgs/image-20240916151022779.png)



## 高级查询&DSL练习

### 用户信息数据

##### 1.查询所有女性用户的姓名和电子邮件。

命令如下：

![image-20240916174851307](./imgs/image-20240916174851307.png)

执行结果如下：![image-20240916174906164](./imgs/image-20240916174906164.png)

##### 2.查找最后登录日期在2024年9月1日之后的所有活跃用户。

命令如下：

![image-20240916154047990](./imgs/image-20240916154047990.png)

执行结果如下：![image-20240916154133296](./imgs/image-20240916154133296.png)![image-20240916154143350](./imgs/image-20240916154143350.png)![image-20240916154155342](./imgs/image-20240916154155342.png)![image-20240916154208976](./imgs/image-20240916154208976.png)![image-20240916154215661](./imgs/image-20240916154215661.png)

##### 3.查询住在"Anytown"的用户。

命令如下：

![image-20240916154504213](./imgs/image-20240916154504213.png)

执行结果如下：

![image-20240916154521590](./imgs/image-20240916154521590.png)

##### 4.查找出生日期在1990年之后的所有用户。

命令如下：

![image-20240916154754824](./imgs/image-20240916154754824.png)

执行结果如下：

![image-20240916154814659](./imgs/image-20240916154814659.png)![image-20240916154830036](./imgs/image-20240916154830036.png)![image-20240916154840809](./imgs/image-20240916154840809.png)![image-20240916154848783](./imgs/image-20240916154848783.png)![image-20240916154856530](./imgs/image-20240916154856530.png)

##### 5.查询所有状态为"inactive"的用户。

命令如下：![image-20240916154952934](./imgs/image-20240916154952934.png)

执行结果如下：

![image-20240916155011642](./imgs/image-20240916155011642.png)![image-20240916155020098](./imgs/image-20240916155020098.png)![image-20240916155031174](./imgs/image-20240916155031174.png)

##### 6.查找注册日期在2023年1月1日到2023年12月31日之间的用户。

命令如下：

![image-20240916155135499](./imgs/image-20240916155135499.png)

执行结果如下：

![image-20240916155156968](./imgs/image-20240916155156968.png)![image-20240916155206636](./imgs/image-20240916155206636.png)![image-20240916155214658](./imgs/image-20240916155214658.png)![image-20240916155222227](./imgs/image-20240916155222227.png)![image-20240916155228607](./imgs/image-20240916155228607.png)

##### 7.查询名字为"Bob Smith"的用户的详细信息。

命令如下：

![image-20240916155338432](./imgs/image-20240916155338432.png)

执行结果如下：![image-20240916155354278](./imgs/image-20240916155354278.png)

##### 8.查找电话号码以"123"开头的用户。

命令如下：

![image-20240916160148618](./imgs/image-20240916160148618.png)

执行结果如下：![image-20240916160200686](./imgs/image-20240916160200686.png)![image-20240916160210934](./imgs/image-20240916160210934.png)

##### 9.查询电子邮件域为"example.com"的所有用户。

命令如下：

![image-20240916161741826](./imgs/image-20240916161741826.png)

执行结果如下：![image-20240916161803676](./imgs/image-20240916161803676.png)![image-20240916161813142](./imgs/image-20240916161813142.png)![image-20240916161831501](./imgs/image-20240916161831501.png)![image-20240916161845655](./imgs/image-20240916161845655.png)![image-20240916161854961](./imgs/image-20240916161854961.png)

##### 10.查找所有名字中包含"Lee"的用户。

命令如下：

![image-20240916162427040](./imgs/image-20240916162427040.png)

执行结果如下：![image-20240916162432547](./imgs/image-20240916162432547.png)

### 产品目录数据

##### 1.查询所有类别为"Audio"的产品名称和价格。

命令如下：

![image-20240916174802571](./imgs/image-20240916174802571.png)

执行结果如下：![image-20240916174817669](./imgs/image-20240916174817669.png)

##### 2.查找价格高于50美元的所有产品。

命令如下：

![image-20240916163036485](./imgs/image-20240916163036485.png)

执行结果如下：![image-20240916163053347](./imgs/image-20240916163053347.png)![image-20240916163102052](./imgs/image-20240916163102052.png)![image-20240916163112600](./imgs/image-20240916163112600.png)![image-20240916163119954](./imgs/image-20240916163119954.png)![image-20240916163127192](./imgs/image-20240916163127192.png)![image-20240916163137340](./imgs/image-20240916163137340.png)

##### 3.查询库存数量少于100的产品。

命令如下：

![image-20240916163254202](./imgs/image-20240916163254202.png)

执行结果如下：![image-20240916163304901](./imgs/image-20240916163304901.png)![image-20240916163314967](./imgs/image-20240916163314967.png)![image-20240916163324423](./imgs/image-20240916163324423.png)![image-20240916163330645](./imgs/image-20240916163330645.png)

##### 4.查找评分高于4.5的所有产品。

命令如下：

![image-20240916163418073](./imgs/image-20240916163418073.png)

执行结果如下：![image-20240916163429865](./imgs/image-20240916163429865.png)![image-20240916163437920](./imgs/image-20240916163437920.png)![image-20240916163449841](./imgs/image-20240916163449841.png)![image-20240916163456743](./imgs/image-20240916163456743.png)![image-20240916163507786](./imgs/image-20240916163507786.png)![image-20240916163513201](./imgs/image-20240916163513201.png)

##### 5.查询标签中包含"smart"的所有产品。

命令如下：

![image-20240916163901391](./imgs/image-20240916163901391.png)

执行结果如下：![image-20240916163911048](./imgs/image-20240916163911048.png)![image-20240916163918534](./imgs/image-20240916163918534.png)![image-20240916163929885](./imgs/image-20240916163929885.png)

##### 6.查找供应商为"TechCorp"的产品。

命令如下：

![image-20240916164030370](./imgs/image-20240916164030370.png)

执行结果如下：![image-20240916164047121](./imgs/image-20240916164047121.png)

##### 7.查询发布日期在2023年6月1日之后的所有产品。

命令如下：

![image-20240916164302690](./imgs/image-20240916164302690.png)

执行结果如下：![image-20240916164315815](./imgs/image-20240916164315815.png)![image-20240916164328667](./imgs/image-20240916164328667.png)![image-20240916164343680](./imgs/image-20240916164343680.png)![image-20240916164353872](./imgs/image-20240916164353872.png)![image-20240916164402057](./imgs/image-20240916164402057.png)![image-20240916164408741](./imgs/image-20240916164408741.png)

##### 8.查找描述中包含"wireless"的产品。

命令如下：

![image-20240916164456401](./imgs/image-20240916164456401.png)

执行结果如下：![image-20240916164505466](./imgs/image-20240916164505466.png)

##### 9.查询价格在20美元到100美元之间的所有产品。

命令如下：

![image-20240916164540877](./imgs/image-20240916164540877.png)

执行结果如下：![image-20240916164551923](./imgs/image-20240916164551923.png)![image-20240916164601682](./imgs/image-20240916164601682.png)![image-20240916164611326](./imgs/image-20240916164611326.png)![image-20240916164621062](./imgs/image-20240916164621062.png)![image-20240916164629109](./imgs/image-20240916164629109.png)![image-20240916164634846](./imgs/image-20240916164634846.png)

##### 10.查找产品名称中包含"Light"的所有产品。

命令如下：

![image-20240916171541449](./imgs/image-20240916171541449.png)

执行结果如下：![image-20240916171547531](./imgs/image-20240916171547531.png)

### 订单记录数据

##### 1.查询所有状态为"completed"的订单的订单ID和总金额。

命令如下：

![image-20240916174701012](./imgs/image-20240916174701012.png)

执行结果如下：![image-20240916174718402](./imgs/image-20240916174718402.png)

##### 2.查找总金额大于100美元的所有订单。

命令如下：

![image-20240916172100462](./imgs/image-20240916172100462.png)

执行结果如下：![image-20240916172113671](./imgs/image-20240916172113671.png)![image-20240916172123493](./imgs/image-20240916172123493.png)![image-20240916172135784](./imgs/image-20240916172135784.png)![image-20240916172146767](./imgs/image-20240916172146767.png)![image-20240916172200748](./imgs/image-20240916172200748.png)![image-20240916172209429](./imgs/image-20240916172209429.png)

##### 3.查询支付方式为"paypal"的订单。

命令如下：

![image-20240916172251573](./imgs/image-20240916172251573.png)

执行结果如下：![image-20240916172301488](./imgs/image-20240916172301488.png)![image-20240916172309779](./imgs/image-20240916172309779.png)![image-20240916172316788](./imgs/image-20240916172316788.png)

##### 4.查找订单日期在2024年2月之后的所有订单。

命令如下：

![image-20240916174508315](./imgs/image-20240916174508315.png)

执行结果如下：![image-20240916174527724](./imgs/image-20240916174527724.png)![image-20240916174534750](./imgs/image-20240916174534750.png)![image-20240916174542719](./imgs/image-20240916174542719.png)![image-20240916174603628](./imgs/image-20240916174603628.png)![image-20240916174611036](./imgs/image-20240916174611036.png)![image-20240916174617217](./imgs/image-20240916174617217.png)

##### 5.查询包含产品ID为"P001"的订单。

命令如下：

![image-20240916173453699](./imgs/image-20240916173453699.png)

执行结果如下：![image-20240916173503996](./imgs/image-20240916173503996.png)

##### 6.查找所有状态为"cancelled"的订单的客户ID。

命令如下：

![image-20240916173737811](./imgs/image-20240916173737811.png)

执行结果如下：![image-20240916173745469](./imgs/image-20240916173745469.png)![image-20240916173751119](./imgs/image-20240916173751119.png)

##### 7.查询发货日期在2024年1月15日之前的订单。

命令如下：

![image-20240916174408312](./imgs/image-20240916174408312.png)

执行结果如下

![image-20240916174441594](./imgs/image-20240916174441594.png)

##### 8.查找使用"credit_card"支付的订单。

命令如下：

![image-20240916173929218](./imgs/image-20240916173929218.png)

执行结果如下：![image-20240916173941351](./imgs/image-20240916173941351.png)![image-20240916173951994](./imgs/image-20240916173951994.png)![image-20240916174002188](./imgs/image-20240916174002188.png)![image-20240916174012061](./imgs/image-20240916174012061.png)![image-20240916174029235](./imgs/image-20240916174029235.png)

##### 9.查询总金额在50美元到200美元之间的所有订单。

命令如下：

![image-20240916174112753](./imgs/image-20240916174112753.png)

执行结果如下：![image-20240916174119120](./imgs/image-20240916174119120.png)![image-20240916174130647](./imgs/image-20240916174130647.png)![image-20240916174140373](./imgs/image-20240916174140373.png)![image-20240916174147262](./imgs/image-20240916174147262.png)![image-20240916174154881](./imgs/image-20240916174154881.png)![image-20240916174203565](./imgs/image-20240916174203565.png)

##### 10.查找订单ID中包含"OR01"的所有订单。

命令如下：

![image-20240916174322742](./imgs/image-20240916174322742.png)

执行结果如下：

![image-20240916174328826](./imgs/image-20240916174328826.png)




# 三、**问题及解决方法**

 